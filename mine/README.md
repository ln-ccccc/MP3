# 矿预测模型终端

一个深色科技风的矿预测模型终端界面，保留原有「地图 + 图层切换 + 矿山搜索/定位 + 点击矿山查看详情」的基础功能框架，并替换为现代化的数据可视化与控制面板。

## 界面设计稿（结构与规范）

### 信息架构

```
┌──────────────────────────────────────────────────────────────────────┐
│ 顶栏：标题 + 后端/数据/模型状态 + 时间                                  │
├──────────────────────────────────────────────────────┬───────────────┤
│                                                      │ 右侧：悬浮堆栈  │
│                                                      │ (可拖拽排序)    │
│ 主区：全屏地图 (基础/卫星/地形)                        │ ├─ 地图控制    │
│                                                      │ ├─ 模型控制    │
│                                                      │ ├─ 关键指标    │
│                                                      │ ├─ 预测曲线    │
│                                                      │ └─ 分布热力    │
└──────────────────────────────────────────────────────┴───────────────┘
```

### 视觉规范

- 主题：深色背景 + 科技蓝（`#3B82F6`）/矿橙（`#F59E0B`）为主色
- 字体：系统无衬线（`Inter, -apple-system, Segoe UI, Roboto, ...`）
- 材质：Glassmorphism (毛玻璃) 风格，背景模糊 `8px`
- 动效：组件悬浮/拖拽反馈，平滑过渡

### 交互规范

- **组件拖拽**：右侧悬浮堆栈中的所有卡片支持**拖拽排序**，可根据使用习惯调整位置
- 操作组件反馈：按钮 hover/active、表单 focus 高亮
- 可视化缩放：曲线图与热力图均启用 `dataZoom`（滚轮/拖拽/滑条）
- 详情查看：点击曲线点或热力栅格，弹出「点位/栅格详情」对话框
- 防误操作：停止预测、重置参数均有确认弹窗

## 组件替换清单

| 原界面组件/元素 | 状态 | 新组件/区域 | 说明 |
|---|---:|---|---|
| 主标题「云南矿山生态修复智能监测平台」 | 替换 | 顶栏主标题「矿预测模型终端」 | 符合终端定位 |
| 过时装饰性挂件（装饰图形/复杂玻璃挂件等） | 移除 | 极简卡片体系 | 通过负空间与材质实现高级感 |
| 左侧悬浮统计卡/排名卡 | 替换 | 操作面板 + 指标卡片 + 状态监控 | 强化“预测模型终端”任务导向 |
| 旧式详情弹窗 | 重做 | 现代化矿山详情弹窗（含 NDVI 图） | 信息更聚焦，风格统一 |
| 缺少预测/分布可视化 | 新增 | 实时预测曲线图 | 支持缩放、点选详情、滚动更新 |
| 缺少分布热力展示 | 新增 | 矿藏分布热力图 | 栅格密度热力，支持缩放与详情 |

## 操作说明

### 1) 启动与访问

前端：

```bash
npm install
npm run dev
```

后端（Express + MySQL）：

```bash
node server.js
```

默认端口：
- 前端：`http://localhost:5173/`
- 后端：`http://localhost:8000/`

可选环境变量：
- `VITE_API_BASE`：后端地址（默认 `http://localhost:8000`）
- `VITE_GEOVIEW_URL`：顶栏「进入系统」跳转地址（默认 `http://localhost:3000/`）

### 2) 地图操作

- 图层切换：地图上方「基础/卫星/地形/NDVI」
- 定位矿山：输入「矿山ID 或 名称」并点击「定位」
- 查看矿山详情：点击矿区多边形，弹出详情并渲染 NDVI 曲线

### 3) 预测操作

- 模型选择：线性趋势 / 指数平滑 / 混合趋势
- 参数调整：预测窗口、刷新频率、平滑系数、置信水平
- 启动预测：开始定时刷新预测曲线
- 暂停：停止刷新但保留当前状态
- 停止：会弹出确认提示，停止后不再实时刷新
- 重置参数：会弹出确认提示，恢复默认参数并刷新曲线

### 4) 可视化交互

- 缩放：曲线图/热力图支持滚轮缩放与滑条缩放
- 详情：点击曲线点或热力栅格，弹出详情对话框

## 分辨率适配

- ≥ 980px：左侧控制栏 + 右侧主区（地图 + 双图）
- < 980px：自动切换为单列布局，双图纵向排列，详情弹窗自动改为单列

