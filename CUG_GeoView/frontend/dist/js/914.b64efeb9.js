"use strict";(self["webpackChunkgeoview"]=self["webpackChunkgeoview"]||[]).push([[914],{2914:function(e,i,t){t.r(i),t.d(i,{default:function(){return T}});var l=t(6768),n=t(4232),a=t(5130);const o={class:"hint"},c={key:0},r={key:1},s={id:"sub-title"},u=["src","onClick"],g=["src","onClick"],d=["src","onClick"],h={style:{"margin-top":"20px"}},p={key:0},f=["src"],b=["src"],k={key:1},m=["src"],y={key:2},w=["src"],C=["src"],_=["src"];function v(e,i,t,v,L,F){const S=(0,l.g2)("el-table-column"),P=(0,l.g2)("el-button"),x=(0,l.g2)("el-table"),A=(0,l.g2)("el-menu-item"),W=(0,l.g2)("el-menu-item-group"),j=(0,l.g2)("el-menu"),E=(0,l.g2)("el-drawer"),T=(0,l.g2)("el-pagination"),z=(0,l.g2)("el-col"),B=(0,l.g2)("el-row"),O=(0,l.g2)("el-dialog");return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Lk)("div",o,[i[14]||(i[14]=(0,l.eW)(" 当前浏览功能区：",-1)),""!==L.type?((0,l.uX)(),(0,l.CE)("span",c,(0,n.v_)(L.type),1)):((0,l.uX)(),(0,l.CE)("span",r,"全部")),(0,l.Lk)("i",{style:{"margin-left":"8px","font-size":"20px"},class:(0,n.C4)({"iconfont icon-bianhuajiance":"变化检测"===L.type,"iconfont icon-mubiaojiance":"目标检测"===L.type,"iconfont icon-erfenleibianhuajiance16px":"地物分类"===L.type,"iconfont icon-changjingguanli":"场景分类"===L.type,"iconfont icon-jishu":"影像超分重建"===L.type})},null,2)]),(0,l.bF)(x,{ref:"multipleTable",data:L.tableData,onSelectionChange:F.handleSelectionChange},{default:(0,l.k6)(()=>[(0,l.bF)(S,{type:"selection"}),(0,l.bF)(S,{label:"日期"},{default:(0,l.k6)(e=>[(0,l.Lk)("span",null,(0,n.v_)(e.row.create_time),1)]),_:1}),(0,l.bF)(S,{label:"功能区"},{default:(0,l.k6)(e=>[(0,l.Lk)("span",s,[(0,l.Lk)("i",{class:(0,n.C4)({"iconfont icon-bianhuajiance":"变化检测"===e.row.type,"iconfont icon-mubiaojiance":"目标检测"===e.row.type,"iconfont icon-erfenleibianhuajiance16px":"地物分类"===e.row.type,"iconfont icon-changjingguanli":"场景分类"===e.row.type,"iconfont icon-jishu":"影像超分重建"===e.row.type})},null,2),(0,l.eW)((0,n.v_)(e.row.type),1)])]),_:1}),(0,l.bF)(S,{label:"原图"},{default:(0,l.k6)(e=>[(0,l.Lk)("img",{src:L.global.BASEURL+e.row.before_img,"min-width":"70",height:"70",alt:"原图",onClick:i=>F.previewOnePic(e.row.before_img)},null,8,u),"变化检测"===e.row.type?((0,l.uX)(),(0,l.CE)("img",{key:0,src:L.global.BASEURL+e.row.before_img1,"min-width":"70",height:"70",style:{"margin-left":"20px"},alt:"原图",onClick:i=>F.previewOnePic(e.row.before_img1)},null,8,g)):(0,l.Q3)("",!0)]),_:1}),(0,l.bF)(S,{label:"结果图/预测结果"},{default:(0,l.k6)(e=>[(0,l.bo)((0,l.Lk)("img",{src:L.global.BASEURL+e.row.after_img,"min-width":"70",height:"70",alt:"结果图",onClick:i=>F.previewOnePic(e.row.after_img)},null,8,d),[[a.aG,"场景分类"!==e.row.type]]),(0,l.bo)((0,l.Lk)("div",null,(0,n.v_)(Object.keys(e.row.data)[0])+": "+(0,n.v_)(e.row.data[Object.keys(e.row.data)[0]]),513),[[a.aG,"场景分类"===e.row.type]])]),_:1}),(0,l.bF)(S,{label:"操作"},{default:(0,l.k6)(e=>[(0,l.bF)(P,{size:"default",type:"danger",onClick:i=>F.handleDelete(e.$index,e.row)},{default:(0,l.k6)(()=>[...i[15]||(i[15]=[(0,l.eW)(" 删除 ",-1)])]),_:2},1032,["onClick"]),(0,l.bo)((0,l.bF)(P,{size:"default",type:"primary",onClick:i=>F.previewTwoPic(e.row.before_img,e.row.after_img)},{default:(0,l.k6)(()=>[...i[16]||(i[16]=[(0,l.eW)(" 预览 ",-1)])]),_:2},1032,["onClick"]),[[a.aG,"变化检测"!==e.row.type&&"场景分类"!==e.row.type]]),(0,l.bo)((0,l.bF)(P,{size:"default",type:"primary",onClick:i=>F.previewOnePic(e.row.before_img,e.row.after_img)},{default:(0,l.k6)(()=>[...i[17]||(i[17]=[(0,l.eW)(" 预览 ",-1)])]),_:2},1032,["onClick"]),[[a.aG,"场景分类"===e.row.type]]),(0,l.bo)((0,l.bF)(P,{size:"default",type:"primary",onClick:i=>F.previewThreePic(e.row.before_img,e.row.before_img1,e.row.after_img)},{default:(0,l.k6)(()=>[...i[18]||(i[18]=[(0,l.eW)(" 预览 ",-1)])]),_:2},1032,["onClick"]),[[a.aG,"变化检测"===e.row.type]]),(0,l.bo)((0,l.bF)(P,{size:"default",type:"primary",onClick:i=>F.downloadimgWithWords(e.row.id,L.global.BASEURL+e.row.after_img,`${e.row.type}结果图.png`)},{default:(0,l.k6)(()=>[...i[19]||(i[19]=[(0,l.eW)(" 下载 ",-1)])]),_:2},1032,["onClick"]),[[a.aG,"场景分类"!==e.row.type]])]),_:1})]),_:1},8,["data","onSelectionChange"]),(0,l.Lk)("div",{type:"primary",class:"select-fun-drawer hidden-md-and-down",onClick:i[0]||(i[0]=e=>L.isSelect=!0)},[...i[20]||(i[20]=[(0,l.Lk)("div",{class:"select-fun-title"},[(0,l.Lk)("span",{style:{}},"功能筛选")],-1),(0,l.Lk)("div",{class:"select-fun-icon"},[(0,l.Lk)("i",{class:"iconfont icon-shaixuan"})],-1)])]),(0,l.bF)(E,{modelValue:L.isSelect,"onUpdate:modelValue":i[7]||(i[7]=e=>L.isSelect=e),title:"功能区筛选",direction:L.direction,size:L.size},{default:(0,l.k6)(()=>[(0,l.bF)(j,{class:"el-menu-vertical-demo","text-color":"black","background-color":"white"},{default:(0,l.k6)(()=>[(0,l.bF)(W,null,{default:(0,l.k6)(()=>[(0,l.bF)(A,{index:"1",onClick:i[1]||(i[1]=e=>F.onlyOneFun("变化检测"))},{default:(0,l.k6)(()=>[...i[21]||(i[21]=[(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"iconfont icon-bianhuajiance"}),(0,l.eW)("时序变化分析 ")],-1)])]),_:1}),(0,l.bF)(A,{index:"2",onClick:i[2]||(i[2]=e=>F.onlyOneFun("目标检测"))},{default:(0,l.k6)(()=>[...i[22]||(i[22]=[(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"iconfont icon-mubiaojiance"}),(0,l.eW)("智能目标识别 ")],-1)])]),_:1}),(0,l.bF)(A,{index:"3",onClick:i[3]||(i[3]=e=>F.onlyOneFun("地物分类"))},{default:(0,l.k6)(()=>[...i[23]||(i[23]=[(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"iconfont icon-erfenleibianhuajiance16px"}),(0,l.eW)("地表覆盖分类 ")],-1)])]),_:1}),(0,l.bF)(A,{index:"4",onClick:i[4]||(i[4]=e=>F.onlyOneFun("场景分类"))},{default:(0,l.k6)(()=>[...i[24]||(i[24]=[(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"iconfont icon-changjingguanli"}),(0,l.eW)("场景智能识别 ")],-1)])]),_:1}),(0,l.bF)(A,{index:"5",onClick:i[5]||(i[5]=e=>F.onlyOneFun("影像超分重建"))},{default:(0,l.k6)(()=>[...i[25]||(i[25]=[(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"iconfont icon-jishu"}),(0,l.eW)("影像超分重建 ")],-1)])]),_:1}),(0,l.bF)(A,{index:"6",onClick:i[6]||(i[6]=e=>F.onlyOneFun(""))},{default:(0,l.k6)(()=>[...i[26]||(i[26]=[(0,l.Lk)("h3",null,[(0,l.Lk)("i",{class:"iconfont icon-fuyuan"}),(0,l.eW)("列表复原")],-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue","direction","size"]),(0,l.bo)((0,l.Lk)("div",h,[(0,l.bF)(P,{onClick:i[8]||(i[8]=e=>F.toggleSelection(L.tableData))},{default:(0,l.k6)(()=>[...i[27]||(i[27]=[(0,l.eW)(" 全选 ",-1)])]),_:1}),(0,l.bF)(P,{onClick:i[9]||(i[9]=e=>F.toggleSelection())},{default:(0,l.k6)(()=>[...i[28]||(i[28]=[(0,l.eW)(" 取消选择 ",-1)])]),_:1}),(0,l.bF)(P,{type:"danger",onClick:i[10]||(i[10]=e=>F.deleteAll())},{default:(0,l.k6)(()=>[...i[29]||(i[29]=[(0,l.eW)(" 删除 ",-1)])]),_:1}),(0,l.bF)(P,{type:"primary",onClick:i[11]||(i[11]=e=>F.downLoadAll())},{default:(0,l.k6)(()=>[...i[30]||(i[30]=[(0,l.eW)(" 下载 ",-1)])]),_:1})],512),[[a.aG,0!==L.tableData.length]]),(0,l.bF)(B,{justify:"center"},{default:(0,l.k6)(()=>[(0,l.bF)(z,{xs:24,sm:24,md:10,lg:11,xl:10,style:{"margin-right":"40px"}},{default:(0,l.k6)(()=>[(0,l.bF)(T,{background:"","page-size":L.pageSize,layout:"prev, pager, next, jumper",total:L.total,"current-page":L.currentPage,onSizeChange:F.handleSizeChange,onCurrentChange:F.handleCurrentChange,onNextClick:F.goNextPage,onPrevClick:F.goPrePage},null,8,["page-size","total","current-page","onSizeChange","onCurrentChange","onNextClick","onPrevClick"])]),_:1})]),_:1}),(0,l.bF)(O,{modelValue:L.preVisible,"onUpdate:modelValue":i[13]||(i[13]=e=>L.preVisible=e),modal:!1,title:"图片预览",width:"75%",fullscreen:"",center:""},{default:(0,l.k6)(()=>[2===L.flag?((0,l.uX)(),(0,l.CE)("div",p,[(0,l.bF)(B,{justify:"space-evenly"},{default:(0,l.k6)(()=>[(0,l.Lk)("img",{id:"pre-img",src:L.previewPic1,alt:"预览"},null,8,f),(0,l.Lk)("img",{id:"pre-img",src:L.previewPic2,alt:"预览"},null,8,b)]),_:1})])):1===L.flag?((0,l.uX)(),(0,l.CE)("div",k,[(0,l.bF)(B,{justify:"space-evenly"},{default:(0,l.k6)(()=>[(0,l.Lk)("img",{id:"pre-img",src:L.previewPic1,alt:"预览"},null,8,m)]),_:1})])):3===L.flag?((0,l.uX)(),(0,l.CE)("div",y,[(0,l.bF)(B,{justify:"space-evenly"},{default:(0,l.k6)(()=>[(0,l.Lk)("img",{id:"pre-img",src:L.previewPic1,alt:"预览"},null,8,w),(0,l.Lk)("img",{id:"pre-img",src:L.previewPic3,alt:"预览"},null,8,C),(0,l.Lk)("img",{id:"pre-img",src:L.previewPic2,alt:"预览"},null,8,_)]),_:1}),(0,l.bF)(B)])):(0,l.Q3)("",!0),(0,l.bF)(B,{type:"flex",justify:"center"},{default:(0,l.k6)(()=>[(0,l.bF)(z,{span:1},{default:(0,l.k6)(()=>[(0,l.bF)(P,{type:"primary",onClick:i[12]||(i[12]=e=>L.preVisible=!1)},{default:(0,l.k6)(()=>[...i[31]||(i[31]=[(0,l.eW)(" OK ",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])])}t(4114),t(8111),t(1148),t(2489),t(7588),t(1701);var L=t(2564),F=t(3212);function S(e){this.flag=1,this.fbflag=1,this.previewPic1=F.A.BASEURL+e,this.preVisible=!0}function P(e,i){this.flag=2,this.fbflag=2,this.previewPic1=F.A.BASEURL+e,this.previewPic2=F.A.BASEURL+i,this.preVisible=!0}function x(e,i,t){this.flag=3,this.fbflag=3,this.previewPic1=F.A.BASEURL+e,this.previewPic2=F.A.BASEURL+i,this.previewPic3=F.A.BASEURL+t,this.preVisible=!0}var A=t(3361),W={name:"History",beforeRouteEnter(e,i,t){t(e=>{document.querySelector(".el-main").scrollTop=0})},data(){return{delete:{ids:[]},type:"",isSelect:!1,direction:"rtl",size:"15%",pageSize:10,total:0,flag:"",currentPage:1,multipleSelection:[],preVisible:!1,previewPic1:"",previewPic2:"",previewPic3:"",tableData:[],global:{BASEURL:F.A.BASEURL}}},mounted(){this.getTabelInfo()},methods:{previewOnePic:S,downloadimgWithWords:A.Lf,historyGetPage:L.q,historyDelete:L.O,previewTwoPic:P,previewThreePic:x,handleDelete(e,i){this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.delete.ids.push(i.id),this.historyDelete(this.delete).then(i=>{this.tableData.splice(e,1),this.getTabelInfo(),this.$message({type:"success",message:"删除成功!"})}).catch(e=>{})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},deleteAll(){0===this.multipleSelection.length?this.$message.warning("请选择要删除的记录哦"):this.$confirm("此操作将永久删除, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.delete.ids=this.multipleSelection.map(e=>e.id),this.historyDelete(this.delete).then(e=>{this.getTabelInfo(),this.tableData=this.tableData.filter(e=>this.multipleSelection.every(i=>e.id!==i.id)),this.$message({type:"success",message:"删除成功!"})}).catch(e=>{})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},downLoadAll(){if(0===this.multipleSelection.length)this.$message.warning("请选择要下载的历史记录的图片哦");else for(let e of this.multipleSelection)this.downloadimgWithWords(e.id,F.A.BASEURL+e.after_img,`${e.type}结果图.png`)},toggleSelection(e){e?e.forEach(e=>{this.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange(e){this.multipleSelection=e},handleSizeChange(e){this.pageSize=e,this.getTabelInfo()},handleCurrentChange(e){this.page=e,this.currentPage=e,this.getTabelInfo()},getTabelInfo(){this.historyGetPage(this.currentPage,10,this.type).then(e=>{this.total=e.data.count,this.tableData=e.data.data}).catch(e=>{})},goNextPage(){this.getTabelInfo()},goPrePage(){this.getTabelInfo()},onlyOneFun(e){this.type=e,this.getTabelInfo(),this.isSelect=!1}}},j=t(1241);const E=(0,j.A)(W,[["render",v],["__scopeId","data-v-75824709"]]);var T=E}}]);
//# sourceMappingURL=914.b64efeb9.js.map