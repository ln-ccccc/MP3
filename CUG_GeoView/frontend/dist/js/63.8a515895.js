"use strict";(self["webpackChunkgeoview"]=self["webpackChunkgeoview"]||[]).push([[63],{760:function(e,l,i){i.r(l),i.d(l,{default:function(){return y}});var t=i(6768),a=i(4232);const s={key:0,class:"clear-queue"},o={class:"prehandle-label container"},n={class:"custom-model"},d={key:0},c={class:"handle-button"},r={class:"go-bold"};function u(e,l,i,u,p,f){const h=(0,t.g2)("Tabinfor"),g=(0,t.g2)("el-divider"),m=(0,t.g2)("el-button"),k=(0,t.g2)("el-upload"),b=(0,t.g2)("el-row"),v=(0,t.g2)("el-radio"),L=(0,t.g2)("el-card"),_=(0,t.g2)("el-col"),y=(0,t.g2)("MyVueCropper"),C=(0,t.g2)("el-dialog"),w=(0,t.g2)("ImgShow"),F=(0,t.g2)("Bottominfor");return(0,t.uX)(),(0,t.CE)("div",null,[(0,t.bF)(h,null,{left:(0,t.k6)(()=>[...l[9]||(l[9]=[(0,t.Lk)("div",{id:"sub-title"},[(0,t.eW)(" 场景分类"),(0,t.Lk)("i",{class:"iconfont icon-dianji"})],-1)])]),_:1}),(0,t.bF)(g),l[20]||(l[20]=(0,t.Fv)('<p data-v-7798ccd6> 请上传包含<span class="go-bold" data-v-7798ccd6>图片的文件夹</span><i class="iconfont icon-wenjianjia" data-v-7798ccd6></i>或者<span class="go-bold" data-v-7798ccd6>图片</span><i class="iconfont icon-tupiantianjia" data-v-7798ccd6></i>，<i class="iconfont icon-zidingyi" data-v-7798ccd6></i></p>',1)),(0,t.bF)(b,{type:"flex",justify:"center"},{default:(0,t.k6)(()=>[(0,t.bF)(_,{span:24},{default:(0,t.k6)(()=>[(0,t.bF)(L,{style:{border:"4px dashed var(--el-border-color)"}},{default:(0,t.k6)(()=>[p.fileList.length?((0,t.uX)(),(0,t.CE)("div",s,[(0,t.bF)(m,{type:"primary",class:"btn-animate2 btn-animate__surround",onClick:f.clearQueue},{default:(0,t.k6)(()=>[...l[10]||(l[10]=[(0,t.eW)(" 清空图片 ",-1)])]),_:1},8,["onClick"])])):(0,t.Q3)("",!0),(0,t.bF)(k,{ref:"upload","file-list":p.fileList,"onUpdate:fileList":l[0]||(l[0]=e=>p.fileList=e),class:"upload-card",drag:"",action:"#",multiple:"","auto-upload":!1,onChange:l[1]||(l[1]=e=>f.beforeUpload(p.fileList[p.fileList.length-1].raw))},{default:(0,t.k6)(()=>[...l[11]||(l[11]=[(0,t.Lk)("i",{class:"iconfont icon-yunduanshangchuan"},null,-1),(0,t.Lk)("div",{class:"el-upload__text"},[(0,t.eW)(" 将文件拖到此处，或"),(0,t.Lk)("em",null,"点击上传")],-1),(0,t.Lk)("div",{class:"el-upload__tip"}," 只能上传一张或多张图片，请在下方上传文件夹 ",-1)])]),_:1},8,["file-list"]),(0,t.bF)(b,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.Lk)("input",{id:"folder",ref:"uploadFile",type:"file",webkitdirectory:"",directory:"",multiple:"",onChange:l[2]||(l[2]=e=>f.uploadMore())},null,544),(0,t.Lk)("i",{class:"iconfont icon-wenjianshangchuan",onClick:l[3]||(l[3]=(...e)=>f.fileClick&&f.fileClick(...e))},"上传文件夹")]),_:1}),(0,t.bF)(b,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.Lk)("p",null,[(0,t.Lk)("label",o,[(0,t.Lk)("input",{ref:"cut",type:"checkbox",onChange:l[4]||(l[4]=e=>f.select())},null,544),l[12]||(l[12]=(0,t.Lk)("span",{class:"checkmark"},null,-1)),l[13]||(l[13]=(0,t.Lk)("span",{class:"go-bold label-words"},"上传时编辑图片",-1)),l[14]||(l[14]=(0,t.Lk)("i",{class:"iconfont icon-crop-full"},null,-1))])])]),_:1}),(0,t.bF)(b,{justify:"center"},{default:(0,t.k6)(()=>[(0,t.Lk)("div",n,[l[15]||(l[15]=(0,t.eW)(" 可选训练模型： ",-1)),0===p.modelPathArr.length?((0,t.uX)(),(0,t.CE)("span",d,"未检测到模型文件，请查看上传目录是否有误")):(0,t.Q3)("",!0),((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(p.modelPathArr,(e,i)=>((0,t.uX)(),(0,t.Wv)(v,{key:i,modelValue:p.uploadSrc.model_path,"onUpdate:modelValue":l[5]||(l[5]=e=>p.uploadSrc.model_path=e),class:"choose-item",label:e.model_path},{default:(0,t.k6)(()=>[(0,t.eW)((0,a.v_)(e.model_name),1)]),_:2},1032,["modelValue","label"]))),128))])]),_:1}),(0,t.Lk)("div",c,[(0,t.bF)(m,{type:"primary",class:"btn-animate btn-animate__shiny",onClick:l[6]||(l[6]=e=>f.upload("场景分类","classification"))},{default:(0,t.k6)(()=>[...l[16]||(l[16]=[(0,t.eW)(" 开始处理 ",-1)])]),_:1})])]),_:1})]),_:1})]),_:1}),(0,t.bF)(h,null,{left:(0,t.k6)(()=>[...l[17]||(l[17]=[(0,t.Lk)("div",{id:"sub-title"},[(0,t.eW)(" 结果图预览"),(0,t.Lk)("i",{class:"iconfont icon-dianji"})],-1)])]),_:1}),(0,t.bF)(g),(0,t.bF)(h,null,{left:(0,t.k6)(()=>[...l[18]||(l[18]=[(0,t.Lk)("p",null,[(0,t.Lk)("span",{class:"go-bold"},"点击图片"),(0,t.eW)("即可预览 "),(0,t.Lk)("i",{class:"iconfont icon-duigou"}),(0,t.Lk)("span",null,[(0,t.Lk)("span",{class:"go-bold"},"滑轮滚动"),(0,t.eW)("即可放大缩小")])],-1)])]),right:(0,t.k6)(()=>[(0,t.Lk)("span",r,[(0,t.Lk)("i",{class:"iconfont icon-shuaxin",style:{"padding-right":"55px"},onClick:l[7]||(l[7]=(...e)=>f.getMore&&f.getMore(...e))},[...l[19]||(l[19]=[(0,t.Lk)("span",{class:"hidden-sm-and-down"},"点击刷新",-1)])])])]),_:1}),(0,t.bF)(C,{modelValue:p.cutVisible,"onUpdate:modelValue":l[8]||(l[8]=e=>p.cutVisible=e),modal:!1,title:"编辑",width:"75%",top:"0"},{default:(0,t.k6)(()=>[(0,t.bF)(y,{fileimg:p.fileimg,funtype:p.funtype,file:p.file,child_prehandle:p.uploadSrc.prehandle,child_denoise:p.uploadSrc.denoise,"child-model-path":p.uploadSrc.model_path,onCutChanged:f.notvisible,onChildRefresh:f.getMore},null,8,["fileimg","funtype","file","child_prehandle","child_denoise","child-model-path","onCutChanged","onChildRefresh"])]),_:1},8,["modelValue"]),(0,t.bF)(w,{"img-arr":p.imgArr},null,8,["img-arr"]),(0,t.bF)(F)])}i(4114),i(4603),i(7566),i(8721);var p=i(9857),f=i(2564),h=i(121),g=i(7901),m=i(104),k=i(3490),b=i(6926),v={name:"Classification",components:{Tabinfor:m.A,Bottominfor:k.A,MyVueCropper:b.A,ImgShow:g.A},beforeRouteEnter(e,l,i){i(e=>{document.querySelector(".el-main").scrollTop=0})},data(){return{isUpload:!0,canUpload:!0,before:[],fileimg:"",file:{},isNotCut:!0,cutVisible:!1,funtype:"场景分类",scrollTop:"",fit:"fill",fileList:[],uploadSrc:{list:[],model_path:""},modelPathArr:[],imgArr:[]}},watch:{uploadSrc:{handler(e,l){this.uploadSrc=e},deep:!0,immediate:!0}},created(){this.getUploadImg("场景分类"),this.getCustomModel("classification").then(e=>{this.modelPathArr=e.data.data,this.uploadSrc.model_path=this.modelPathArr[0]?.model_path}).catch(e=>{})},methods:{imgUpload:p.vh,getCustomModel:p.bB,historyGetPage:f.q,createSrc:p.Dr,getUploadImg:h.Be,upload:h.Se,checkUpload(){this.isUpload=0!==this.beforeImg.length},clearQueue(){this.fileList=[],this.$message.success("清除成功")},notvisible(){this.cutVisible=!1,this.fileList=[]},getMore(){this.getUploadImg("场景分类")},uploadMore(){this.beforeUpload(...this.$refs.uploadFile.files),this.canUpload?this.fileList.push(...this.$refs.uploadFile.files):setTimeout(()=>{this.$message.error("检测到您上传的文件夹内存在不符合规范的图片类型")},1e3)},fileClick(){document.querySelector("#folder").click()},beforeUpload(e){this.cutVisible=this.$refs.cut.checked;const l=e.name.substring(e.name.lastIndexOf(".")+1),i=["jpg","jpeg","png","JPG","JPEG"];-1===i.indexOf(l)?(this.$message.error("只允许上传jpg, jpeg, png, JPG, 或JPEG格式,请重新上传"),this.fileList=[],this.canUpload=!1,this.cutVisible=!1):(this.canUpload=!0,this.fileimg=window.URL.createObjectURL(new Blob([e])))},select(){this.isNotCut=this.$refs.cut.checked}}},L=i(1241);const _=(0,L.A)(v,[["render",u],["__scopeId","data-v-7798ccd6"]]);var y=_},7901:function(e,l,i){i.d(l,{A:function(){return k}});var t=i(6768),a=i(4232);const s={class:"img-display-box"},o={class:"index-number"},n={key:0},d={class:"img-infor"},c=["onClick"],r={key:1,class:"img-index"},u={class:"index-number"};function p(e,l,i,p,f,h){const g=(0,t.g2)("el-empty"),m=(0,t.g2)("el-divider"),k=(0,t.g2)("el-image"),b=(0,t.g2)("el-card");return(0,t.uX)(),(0,t.Wv)(b,{style:{"margin-bottom":"10px"}},{default:(0,t.k6)(()=>[0===f.childImgArr.length?((0,t.uX)(),(0,t.Wv)(g,{key:0,"image-size":200})):(0,t.Q3)("",!0),(0,t.Lk)("div",s,[((0,t.uX)(!0),(0,t.CE)(t.FK,null,(0,t.pI)(f.childImgArr,(e,i)=>((0,t.uX)(),(0,t.CE)("div",{key:i,class:"img-display-item"},[(0,t.bF)(m,{class:"img-divider"},{default:(0,t.k6)(()=>[l[0]||(l[0]=(0,t.eW)(" 第",-1)),(0,t.Lk)("span",o,(0,a.v_)(e.id),1),l[1]||(l[1]=(0,t.eW)("组 ",-1))]),_:2},1024),(0,t.Lk)("div",null,[(0,t.bF)(k,{ref_for:!0,ref:"tableTab",class:"img-display",src:e.before_img,fit:f.fit,lazy:!0,"preview-src-list":[e.before_img],"preview-teleported":!0},null,8,["src","fit","preview-src-list"]),l[2]||(l[2]=(0,t.Lk)("div",{class:"img-infor"},[(0,t.Lk)("span",null,"原图")],-1))]),(0,t.Lk)("div",null,["场景分类"!==e.type?((0,t.uX)(),(0,t.CE)("div",n,[(0,t.bF)(k,{ref_for:!0,ref:"tableTab",class:"img-display",src:e.after_img,fit:f.fit,lazy:!0,"preview-src-list":[e.after_img],"preview-teleported":!0},null,8,["src","fit","preview-src-list"]),(0,t.Lk)("div",d,[l[4]||(l[4]=(0,t.Lk)("span",null,"预测结果",-1)),(0,t.Lk)("span",{onClick:l=>h.downloadimgWithWords(e.id,e.after_img,`${e.type}结果图.png`)},[...l[3]||(l[3]=[(0,t.Lk)("i",{class:"iconfont icon-xiazai"},null,-1)])],8,c)])])):((0,t.uX)(),(0,t.CE)("div",r,[(0,t.Lk)("span",u,(0,a.v_)(Object.keys(e.data)[0])+": "+(0,a.v_)(e.data[Object.keys(e.data)]),1)]))])]))),128))])]),_:1})}var f=i(3361),h={name:"Imgshow",props:{imgArr:{type:Array,default(){return[]}}},data(){return{fit:"fill",childImgArr:[]}},mounted(){this.childImgArr=this.imgArr},updated(){this.childImgArr=this.imgArr},methods:{downloadimgWithWords:f.Lf}},g=i(1241);const m=(0,g.A)(h,[["render",p],["__scopeId","data-v-45290c92"]]);var k=m}}]);
//# sourceMappingURL=63.8a515895.js.map